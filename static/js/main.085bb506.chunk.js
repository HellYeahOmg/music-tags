(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/genre.69eeacc1.svg"},37:function(e,t,n){e.exports=n.p+"static/media/mood.12215efb.svg"},38:function(e,t,n){e.exports=n.p+"static/media/list.59c79e23.svg"},39:function(e,t,n){e.exports=n.p+"static/media/arrow.11dd9761.svg"},46:function(e,t,n){e.exports=n(62)},51:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),i=n(35),r=n.n(i),c=n(17),l=n(18),o=n(24),d=n(19),m=n(25),h=n(44),u=n(22),g=n(11),p=n(32),f=n(12),v=n(9),C=n.n(v);function _(){var e=Object(f.a)(["\n  {\n    demoValues(attributeId: 1) {\n      title\n      id\n      childs {\n        id\n        title\n      }\n    }\n  }\n"]);return _=function(){return e},e}var E=C()(_());function y(){var e=Object(f.a)(["\n  {\n    demoValues(attributeId: 7) {\n      title\n      id\n      childs {\n        id\n        title\n      }\n    }\n  }\n"]);return y=function(){return e},e}var b=C()(y());function w(){var e=Object(f.a)(["\n  query($valueIds: [Int]) {\n    demoMediafilesCount(valueIds: $valueIds)\n  }\n"]);return w=function(){return e},e}var T=C()(w()),k=(n(51),n(36)),O=n.n(k),I=n(37),j=n.n(I),x=n(38),N=n.n(x),S=function(e){e.genreIcon;var t=e.currentTab,n=(e.moodIcon,e.handleActiveTab);return s.a.createElement("div",{className:"tags__type"},s.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("mask",{id:"a","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5746 5.05114C16.7684 3.2448 14.3676 2.25 11.8125 2.25H11.8117C9.25781 2.25 6.85691 3.24461 5.05076 5.05061C3.24461 6.85676 2.25 9.258 2.25 11.8123C2.24963 14.3664 3.24461 16.7679 5.0508 18.574C6.85729 20.3802 9.25856 21.375 11.8129 21.375H11.8136C14.3676 21.375 16.7685 20.3804 18.5746 18.5742C20.3807 16.7679 21.3754 14.3664 21.375 11.8123C21.3754 9.25856 20.3807 6.85729 18.5746 5.05114ZM17.2485 17.2484C15.7969 18.7004 13.8666 19.5 11.8136 19.5H11.8128C9.75949 19.5 7.82884 18.7004 6.3768 17.2482C4.92443 15.7961 4.125 13.8657 4.125 11.8123C4.125 9.75896 4.9248 7.82831 6.37684 6.37646C7.8285 4.92443 9.75877 4.125 11.8129 4.125H11.8136C13.8666 4.125 15.7969 4.92461 17.2489 6.37684C18.7006 7.82888 19.5 9.75915 19.5 11.8123C19.5 13.8657 18.7006 15.7963 17.2485 17.2484ZM11.8125 7.125H11.8121C10.5604 7.125 9.3834 7.61261 8.49791 8.49791C7.61243 9.38321 7.125 10.5604 7.125 11.8125C7.125 14.3972 9.22778 16.5 11.8125 16.5H11.8129C13.065 16.5 14.2419 16.0124 15.1271 15.1271C16.0126 14.2418 16.5 13.0646 16.5 11.8125C16.5 10.5604 16.0126 9.38344 15.1271 8.4981C14.2419 7.61261 13.0646 7.125 11.8125 7.125ZM13.8014 13.8012C13.27 14.3326 12.564 14.625 11.8129 14.625H11.8125C10.2616 14.625 9 13.3634 9 11.8125C9 11.0612 9.29261 10.355 9.82399 9.82361C10.355 9.29243 11.0614 9 11.8125 9H11.8129C13.3634 9 14.625 10.2616 14.625 11.8125C14.625 12.5638 14.3324 13.27 13.8014 13.8012ZM13.125 11.8125C13.125 12.5374 12.5374 13.125 11.8125 13.125C11.0876 13.125 10.5 12.5374 10.5 11.8125C10.5 11.0876 11.0876 10.5 11.8125 10.5C12.5374 10.5 13.125 11.0876 13.125 11.8125Z",fill:"#000"})),s.a.createElement("g",{mask:"url(#a)"},s.a.createElement("rect",{width:"24",height:"24",fill:"genres"===t?"#0077C2":"#969696"}))),s.a.createElement("span",{onClick:n,id:"genres",className:"genres"===t?"active":""},"\u0436\u0430\u043d\u0440"),s.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},s.a.createElement("path",{d:"M20.9969 10.3114C20.9969 5.2455 16.8752 1.12354 11.8091 1.12354C6.74295 1.12354 2.625 5.24501 2.625 10.311C2.625 14.5954 5.43401 18.4539 9.10118 19.7695L7.93793 23.2502H15.3053L14.148 19.7873C17.5965 18.4836 20.9969 14.5893 20.9969 10.3114ZM10.5418 21.3752L10.9347 20.1989C11.5303 20.2662 11.9463 20.2572 12.3165 20.2232L12.7014 21.3752H10.5418ZM13.5549 18.0123C9.37087 19.6413 4.50004 15.3067 4.50004 10.3109C4.50004 6.27881 7.77679 2.9985 11.8091 2.9985C15.8413 2.9985 19.1218 6.27881 19.1218 10.3109C19.1218 13.6594 16.2963 16.945 13.5549 18.0123ZM6.87004 13.576L8.51359 12.6737C6.81251 9.57577 8.74586 6.48472 11.625 6.37519V4.50274C7.20064 4.6707 4.52846 9.31181 6.87004 13.576Z",fill:"black"})),s.a.createElement("g",{mask:"url(#mask0)"},s.a.createElement("rect",{width:"24",height:"24",fill:"mood"===t?"#0077C2":"#969696"}))),s.a.createElement("span",{onClick:n,id:"mood",className:"mood"===t?"active":""},"\u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435"))},H=function(e){var t=e.moods,n=e.handleAddType,a=e.handleRemoveType;return s.a.createElement("div",{className:"tags__list"},t.map(function(e,t){return s.a.createElement("div",{className:e.choosed?"tags__list-item tags__list-item--mood--active":"tags__list-item tags__list-item--mood",key:t},s.a.createElement("span",{onClick:function(){n(e)}},e.title),e.choosed&&s.a.createElement("span",{onClick:function(){a(e)},className:"tags__list-remove"},"X"))}))},A=n(39),M=n.n(A),R=function(e){var t=e.genres,n=e.listIcon,a=e.handleAddType,i=e.handleShowChildren,r=e.handleRemoveType,c=e.showChildren,l=e.handleHideChildren,o=e.parent,d=function(e){var t=0;return e.childs.forEach(function(e){!0===e.choosed&&t++}),t};return s.a.createElement("div",{className:"tags__list"},s.a.createElement(s.a.Fragment,null,c&&s.a.createElement("div",{className:"tags__child-info"},s.a.createElement("span",{onClick:l,className:"tags__child-back"},s.a.createElement("img",{src:M.a,alt:"\u043d\u0430\u0437\u0430\u0434"})),s.a.createElement("span",null,o.title)),t.map(function(e,t){return s.a.createElement("div",{className:e.choosed?"tags__list-item tags__list-item--genre--active":"tags__list-item tags__list-item--genre",key:t},s.a.createElement("span",{onClick:function(){a(e)}},e.title),e.choosed&&s.a.createElement("span",{onClick:function(){r(e)},className:"tags__list-remove"},"X"),e.childs&&0!==e.childs.length&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{onClick:function(){i(e)},className:"tags__list-expand",src:n,alt:"\u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u043e\u0434\u0436\u0430\u043d\u0440\u044b"}),d(e)>0&&s.a.createElement("span",{className:"tags__list-count"},d(e))))})))},Z=function(e){var t=e.selectedTypes,n=e.handleRemoveType;return s.a.createElement("div",{className:"tags__choosed"},s.a.createElement("span",{className:"tags__choosed-title"},"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438: "),t.map(function(e,t){return s.a.createElement("div",{className:"genres"===e.type?"tags__choosed-item--genre tags__choosed-item":"tags__choosed-item--mood tags__choosed-item",key:t},"".concat(e.title," "),s.a.createElement("span",{onClick:function(){n(e)},className:"tags__choosed-remove"},"X"))}))},q=function(e){var t=e.songs;return s.a.createElement("div",{className:"tags__songs"},s.a.createElement("span",{className:"tags__songs-title"},"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u043d\u043e \u0442\u0440\u0435\u043a\u043e\u0432"),s.a.createElement("span",{className:"tags__songs-count"},t),s.a.createElement("button",{className:"tags__btn"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))},L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={selectedTypes:[],currentTab:"genres",genres:[],moods:[],songs:0,showChildren:!1,parent:{}},n.handleActiveTab=function(e){n.setState({currentTab:e.target.id})},n.handleAddType=function(e){var t=n.state,a=t.selectedTypes,s=t.currentTab,i=t.genres,r=t.moods,c=t.showChildren,l=t.parent,o=Object(p.a)({},e,{choosed:!0,type:s}),d=i.findIndex(function(t){return t.id===e.id});if(c){var m=i.findIndex(function(e){return e.id===l.id}),h=l.childs.findIndex(function(t){return t.id===e.id}),u=Object(g.a)(i);u[m].childs[h]=o,n.setState({genres:u})}if(-1!==d){var f=Object(g.a)(i);f[d]=o,n.setState({genres:f})}else{var v=r.findIndex(function(t){return t.id===e.id}),C=Object(g.a)(r);C[v]=o,n.setState({moods:C})}if(-1===a.findIndex(function(t){return t.id===e.id})){var _=Object(g.a)(a);_.push(o),n.setState({selectedTypes:_},function(){n.loadSongs()})}},n.handleRemoveType=function(e){var t=n.state,a=t.selectedTypes,s=t.genres,i=t.moods,r=Object(p.a)({},e,{choosed:!1}),c=s.findIndex(function(t){return t.id===e.id});if(-1!==c){var l=Object(g.a)(s);l[c]=r,l.forEach(function(t){if(t.childs&&t.childs.length){var n=t.childs.findIndex(function(t){return t.id===e.id});if(-1!==n){var a=l.findIndex(function(e){return e.id===t.id});l[a].childs[n]=r}}}),n.setState({genres:l})}else{var o=i.findIndex(function(t){return t.id===e.id}),d=Object(g.a)(i);d[o]=r,n.setState({moods:d})}var m=a.findIndex(function(t){return t.id===e.id}),h=Object(g.a)(a);h.splice(m,1),n.setState({selectedTypes:h})},n.componentDidMount=function(){n.props.client.query({query:E}).then(function(e){var t=e.data;n.setState({genres:t.demoValues})}),n.props.client.query({query:b}).then(function(e){var t=e.data;n.setState({moods:t.demoValues})})},n.loadSongs=function(){var e=[];n.state.selectedTypes.forEach(function(t){e.push(t.id)}),n.props.client.query({query:T,variables:{valueIds:e}}).then(function(e){var t=e.data;return n.setState({songs:t.demoMediafilesCount})})},n.handleShowChildren=function(e){n.setState({showChildren:!0,parent:e})},n.handleHideChildren=function(){n.setState({showChildren:!1,childs:{title:"",items:[]}})},n.getGenres=function(){var e=n.state,t=e.showChildren,a=e.genres,s=e.parent;return t?s.childs:a},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.moods,n=e.currentTab,a=e.selectedTypes,i=e.songs,r=e.showChildren,c=e.parent;return s.a.createElement("div",{className:"tags"},s.a.createElement("h1",null,"\u041c\u0443\u0437\u044b\u043a\u0430 \u0434\u043b\u044f \u0431\u0430\u0440\u043e\u0432 \u0438 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d\u043e\u0432 \u2192 \u0423\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u043b\u043e\u043a"),s.a.createElement("h2",null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0434\u043b\u044f \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430"),s.a.createElement(S,{genreIcon:O.a,moodIcon:j.a,currentTab:n,handleActiveTab:this.handleActiveTab}),"genres"===n&&s.a.createElement(R,{handleAddType:this.handleAddType,handleRemoveType:this.handleRemoveType,listIcon:N.a,genres:this.getGenres(),showChildren:r,handleShowChildren:this.handleShowChildren,handleHideChildren:this.handleHideChildren,parent:c}),"mood"===n&&s.a.createElement(H,{moods:t,handleAddType:this.handleAddType,handleRemoveType:this.handleRemoveType}),0!==a.length&&s.a.createElement(Z,{selectedTypes:a,handleRemoveType:this.handleRemoveType}),0!==a.length&&s.a.createElement(q,{songs:i}))}}]),t}(s.a.Component),V=Object(u.b)(L),B=new h.a({uri:"http://admin.mv.muz-lab.ru/api/v1/graphql/",credentials:"same-origin"}),U=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(u.a,{client:B},s.a.createElement(V,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.085bb506.chunk.js.map